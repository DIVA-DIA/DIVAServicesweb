<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Ensuring Reproducibility - DIVAServices
    </title>
    <link rel="stylesheet" href="/DIVAServicesweb/styles/main.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
  </head>
  <body>
    <div class="container nav">
      <div class="larger">
        <nav>
          <ul class="left">
            <li><a href="/DIVAServicesweb/">DIVAServices</a></li>
          </ul>
          <ul class="right">
            <!--li-->
            <!--  a(href=baseUrl + 'getting-started.html') Getting started-->
            
          </ul>
        </nav>
      </div>
    </div>
    <div class="container header">
      <div class="larger">
        <header class="is-small">
          <h2>Ensuring Reproducibility</h2>
        </header>
      </div>
    </div>
    <div class="container md-content">
      <div class="larger">
        <aside>
          <ul>
            <li><a href="/DIVAServicesweb/articles/troubleshooting">Troubleshooting</a></li>
          </ul>
          <h2>Basic</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/customizing-experiments">Customizing Experiments</a></li>
            <li><a href="/DIVAServicesweb/articles/prepare-dataset">Preparing a Dataset</a></li>
            <li><a href="/DIVAServicesweb/articles/use-apply-model">Applying a Model to new Data</a></li>
            <li><a href="/DIVAServicesweb/articles/use-bidimensional"> Perform Bidimensional Data Classification</a></li>
            <li><a href="/DIVAServicesweb/articles/use-image-classification">Perform Image Classification</a></li>
            <li><a href="/DIVAServicesweb/articles/use-triplet">Perform Image Similarity Matching</a></li>
            <li><a href="/DIVAServicesweb/articles/visualize-results">Visualizing the Results</a></li>
          </ul>
          <h2>Intermediate</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/add-new-cl-arguments">Adding a New Command-Line Argument</a></li>
            <li><a href="/DIVAServicesweb/articles/ensure-reproducibility">Ensuring Reproducibility</a></li>
            <li><a href="/DIVAServicesweb/articles/implement-your-model">Implementing Your Own Model</a></li>
          </ul>
          <h2>Advanced</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/creating-runner-class">Creating a New Task</a></li>
          </ul>
        </aside>
        <section class="md-container"><h1 id="reproducibility">Reproducibility</h1>
<p>DeepDIVA makes it easy to reproduce an experiment. This is done by ensuring&nbsp;that:</p>
<ul>
<li>there is always a copy of the code used to run the&nbsp;experiment,</li>
<li>all the command line parameters and arguments are known&nbsp;and,</li>
<li>all the pseudo-random generators are&nbsp;seeded.</li>
</ul>
<p>Here are the some of the most common scenarios for&nbsp;reproducibility.</p>
<h2 id="reproduce-your-experiment-for-a-paper">Reproduce your experiment for a&nbsp;paper</h2>
<p>To make the source code easily&nbsp;available:</p>
<ul>
<li>Check your experiment into Github.<ul>
<li>Fork DeepDIVA or clone and push to a different&nbsp;repository.</li>
<li>Make necessary modifications to DeepDIVA (for e.g., using different data augmentation, additional models or datasets,&nbsp;etc)</li>
<li>Commit your changes and push to&nbsp;Github.</li>
</ul>
</li>
<li>Specify a seed using the parameter <code>--seed &lt;number&gt;</code></li>
<li>Run your experiment <strong>without</strong> the <code>--ignoregit</code> flag.</li>
</ul>
<p>Along with the data that was used to run the experiment, the experiment folder contains all the necessary information to reproduce the exact&nbsp;experiment:  </p>
<ul>
<li>The <code>logs.txt</code> in the experiment folder contain information about the<ul>
<li>Github&nbsp;repo,</li>
<li>branch,</li>
<li>commit hash&nbsp;and</li>
<li>the seed used with the&nbsp;experiment.  </li>
</ul>
</li>
<li>The <code>args.txt</code> contains all the command line arguments that were used with the specific source&nbsp;code.</li>
</ul>
<h3 id="example">Example</h3>
<p>Letâ€™s make a Github reproducible experiment using&nbsp;DeepDIVA.</p>
<ul>
<li>First, we need to make a copy of DeepDIVA that can be edited. This can be done by forking DeepDIVA directly on Github (see <a href="https://help.github.com/articles/fork-a-repo/">here</a>), or you can clone DeepDIVA and push it to a new repository that you make (see <a href="https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/">here</a>).</li>
<li>To verify that everything works, use the experiment outlined in <a href="/articles/basic/getting_started.md">Getting&nbsp;Started</a></li>
<li>Make a change in the code by modifying the <a href="http://pytorch.org/docs/master/torchvision/transforms.html">PyTorch data transformations</a> that are used.<ul>
<li>This can be done by editing the function <code>set_up_dataloaders</code> in the file <code>DeepDIVA/template/setup.py</code>.</li>
<li>Change all instances of <code>transforms.Resize(model_expected_input_size)</code>, to <code>transforms.CenterCrop(model_expected_input_size)</code></li>
</ul>
</li>
<li>Add the change, commit and push to&nbsp;Github</li>
<li>Now you can re-run the experiment, and your Github repo, branch and commit information will be stored in the&nbsp;logs.</li>
</ul>
<h2 id="reproduce-an-old-experiment">Reproduce an old&nbsp;experiment</h2>
<p>While DeepDIVA can be helpful for experiment reproducibility, it nonetheless introduces a certain degree of overhead that is not desirable during development. In this scenario, one can suppress the requirement to have Github commits using the command <code>--ignoregit</code>. In this situation, a copy of the code used to run an experiment is made and stored in the experiment folder inside a tarfile (<code>DeepDIVA.tar.gz</code>).</p>
<p>As in the previous scenario, all arguments are still stored in <code>args.txt</code>.
If a seed is not manually specified, a random number is chosen, logged and used to seed all the pseudo-random&nbsp;generators.  </p>
</section>
      </div>
    </div>
    <hr class="clear">
    <div class="container footer">
      <div class="larger">
        <footer>
          <p><span>Made by </span><a href="https://diuf.unifr.ch/main/diva/" target="_blank">DIVA Group</a><span>.</span></p>
          <p>University of Fribourg (Switzerland)</p>
        </footer>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/prism.min.js"></script>
  </body>
</html>