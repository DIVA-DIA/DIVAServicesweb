<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Data on DIVAServices - DIVAServices
    </title>
    <link rel="stylesheet" href="/DIVAServicesweb/styles/main.css">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/themes/prism-okaidia.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-json.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-python.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-java.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-bash.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-docker.js"></script>
    <div class="container nav">
      <div class="larger">
        <nav>
          <ul class="left">
            <li><a href="/DIVAServicesweb/">DIVAServices</a></li>
          </ul>
          <ul class="right">
            <li><a href="/DIVAServicesweb/articles.html">Tutorials</a></li>
          </ul>
        </nav>
      </div>
    </div>
    <div class="container header">
      <div class="larger">
        <header class="is-small">
          <h2>Data on DIVAServices</h2>
        </header>
      </div>
    </div>
    <div class="container md-content">
      <div class="larger">
        <aside>
          <h2>Basic Information</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/core">Core Principles</a></li>
            <li><a href="/DIVAServicesweb/articles/architecture">Architecture</a></li>
            <li><a href="/DIVAServicesweb/articles/data-management">Data Management</a></li>
            <li><a href="/DIVAServicesweb/articles/api">API Endpoints</a></li>
            <li><a href="/DIVAServicesweb/articles/inputs-and-outputs">Inputs and Outputs</a></li>
          </ul>
          <h2>Beginner Tutorials</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/first-execution">Execute your first method</a></li>
          </ul>
          <h2>Intermediate Tutorials</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/provide-your-method">Provide your method</a></li>
          </ul>
          <h2>Advanced Tutorials</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/installation">Install DIVAServices</a></li>
          </ul>
          <h2>Applications</h2>
          <ul>
            <li><a href="/DIVAServicesweb/articles/spotlight">DIVAServices-Spotlight</a></li>
            <li><a href="/DIVAServicesweb/articles/data">DIVAServices-Data</a></li>
            <li><a href="/DIVAServicesweb/articles/management">DIVAServices-Management</a></li>
            <li><a href="/DIVAServicesweb/articles/insomnia">Insomnia</a></li>
          </ul>
        </aside>
        <section class="md-container"><h1 id="handling-data-on-divaservices">Handling Data on&nbsp;DIVAServices</h1>
<p>All data that is stored on DIVAServices is open, and can be accessed by anyone.
We currently donâ€™t have plans to build in additional security features in order to hide&nbsp;data.</p>
<p><strong>Experiment it&nbsp;live</strong></p>
<ul>
<li>There is a IPython Notebook available on <a href="https://drive.google.com/file/d/1IsY6cOoMbmTDANlilC5Gj550GifsVO6_/view?usp=sharing">Google&nbsp;Colab</a></li>
</ul>
<p><strong>Important:</strong> This means, as defined in the <a href="https://github.com/lunactic/DIVAServices/blob/master/TOS.md">Terms of Services</a> data provided to DIVAServices has to be licensed under a <a href="https://creativecommons.org/">Creative Commons</a> (at least&nbsp;<span class="caps">CC</span>-BY-SA)</p>
<p><strong>Important:</strong> As DIVAServices is <strong><span class="caps">NOT</span></strong> a data store, we do not guarantee that data provided to DIVAServices is stored long-term and data can be deleted without&nbsp;notice.</p>
<h2 id="data-organization">Data&nbsp;Organization</h2>
<p>Data on DIVAServices is organized in <code>collections</code>. Each collection serves a bucket for a number of individual files that belong&nbsp;together.</p>
<h2 id="accessing-existing-data">Accessing existing&nbsp;Data</h2>
<p>As described in the <a href="/DIVAServicesweb/articles/api"><span class="caps">API</span></a> Tutorial, all collection information is available through the <code>/collections</code> <span class="caps">API</span>.</p>
<p>A <span class="caps">GET</span> request to <a href="http://divaservices.unifr.ch/api/v2/collections"><code>/collections</code></a> provides information on all currently available collections. The response looks as&nbsp;follows:</p>
<pre><code class="lang-JSON">{
  <span class="attr">"collections"</span>: [
    {
      <span class="attr">"collection"</span>: {
        <span class="attr">"name"</span>: <span class="string">"irritatingflickeringpitbull"</span>,
        <span class="attr">"url"</span>: <span class="string">"http://divaservices.unifr.ch/api/v2/collections/irritatingflickeringpitbull"</span>
      }
    },
    {
      <span class="attr">"collection"</span>: {
        <span class="attr">"name"</span>: <span class="string">"dopeyscholarlykentrosaurus"</span>,
        <span class="attr">"url"</span>: <span class="string">"http://divaservices.unifr.ch/api/v2/collections/dopeyscholarlykentrosaurus"</span>
      }
    },
    {
      <span class="attr">"collection"</span>: {
        <span class="attr">"name"</span>: <span class="string">"brownwigglyasianconstablebutterfly"</span>,
        <span class="attr">"url"</span>: <span class="string">"http://divaservices.unifr.ch/api/v2/collections/brownwigglyasianconstablebutterfly"</span>
      }
    }
  ]
}
</code></pre>
<p>The <code>collections</code> array contains the list of existing&nbsp;collections.</p>
<p>A <span class="caps">GET</span> request to the <code>url</code> of a collection, provides additional information about the collection, as well as the files that are&nbsp;available:</p>
<pre><code class="lang-JSON">{
  <span class="attr">"statusCode"</span>: <span class="number">200</span>,
  <span class="attr">"statusMessage"</span>: <span class="string">"Collection is available"</span>,
  <span class="attr">"percentage"</span>: <span class="number">100</span>,
  <span class="attr">"totalFiles"</span>: <span class="number">1</span>,
  <span class="attr">"files"</span>: [
    {
      <span class="attr">"file"</span>: {
        <span class="attr">"url"</span>: <span class="string">"http://divaservices.unifr.ch/api/v2/files/irritatingflickeringpitbull/original/inverseImage.jpg"</span>,
        <span class="attr">"identifier"</span>: <span class="string">"irritatingflickeringpitbull/inverseImage.jpg"</span>
      }
    }
  ]
}
</code></pre>
<p>We plan on providing additional information about collections in the future (e.g. tags to specify the contents of a&nbsp;collection)</p>
<h2 id="divaservices-file-identifiers">DIVAServices file&nbsp;identifiers</h2>
<p>Each file on DIVAServices has an <code>identifier</code> this <code>identifier</code> is used to refer to data elements when executing&nbsp;methods.</p>
<p><strong>Example</strong></p>
<p>The above described file could be used in the <span class="caps">POST</span> request to e.g. a binarization method as&nbsp;follows:</p>
<pre><code class="lang-JSON">{
  <span class="attr">"parameters"</span>:{},
    <span class="attr">"data"</span>:[
    {
      <span class="attr">"inputImage"</span>: <span class="string">"irritatingflickeringpitbull/inverseImage.jpg"</span>
    }
  ]
}
</code></pre>
<h2 id="creating-a-new-collection">Creating a new&nbsp;collection</h2>
<p>New collections are created by creating a <span class="caps">POST</span> request to <code>/collections</code>.
Collections of files can be created in different ways as described&nbsp;below.</p>
<p><strong>Note</strong></p>
<p>The <code>name</code> parameter is optional when creating a new collection. If provided, this <code>name</code> will be used as identifier for the new collection. Otherwise a randomly generated name is&nbsp;used.</p>
<h3 id="files-from-a-url">Files from a&nbsp;<span class="caps">URL</span></h3>
<p>The simples way for transferring files to DIVAServices if they are accessible through a <span class="caps">URL</span>. The request to create a new collection then looks as&nbsp;follows:</p>
<pre><code class="lang-JSON">{
  <span class="attr">"name"</span>: <span class="string">"YourCollectionName"</span>,
  <span class="attr">"files"</span>:[
    {
      <span class="attr">"type"</span>:<span class="string">"url"</span>,
      <span class="attr">"value"</span>:<span class="string">"http://www.e-codices.unifr.ch/loris/bnf/bnf-lat11641/bnf-lat11641_001r.jp2/full/pct:25/0/default.jpg"</span>,
      <span class="attr">"name"</span>:<span class="string">"bnf-lat11641_001r.jpg"</span>
    }
  ]
}
</code></pre>
<p>This will create a collection named <code>YourCollectionName</code>.</p>
<p>In case a collection with the same name exists already, an error is returned with the following&nbsp;message:</p>
<pre><code class="lang-JSON">{
  <span class="attr">"errorType"</span> : <span class="string">"DuplicateCollectionError"</span>,
  <span class="attr">"message"</span> : <span class="string">"A collection with the name: YourCollectionName already exists."</span>
}
</code></pre>
<h3 id="file-content-inside-the-request">File content inside the&nbsp;request</h3>
<p>Files can be provided mainly in two different&nbsp;ways:</p>
<h4 id="providing-as-url">Providing as&nbsp;<span class="caps">URL</span></h4>
<p>The simples way of providing files was shown in the example above. Whenever possible files should be referenced from publicly accessible URLs. DIVAServices will then download the files from there and store them on the File&nbsp;Storage.</p>
<p>When referencing from a <span class="caps">URL</span> the JSON object for a file needs to fullfill the following&nbsp;requirements:</p>
<ul>
<li><code>type</code> needs to be set to <code>url</code></li>
<li><code>value</code> needs to point to the publicly accessible <span class="caps">URL</span> where the file can be&nbsp;downloaded</li>
<li><code>name</code> (optional) the filename that should be given this file. Full filename including file extension needs to be provided (e.g. <code>image_001.jpg</code>).</li>
</ul>
<h4 id="providing-as-base64-encoded-string">Providing as base64 encoded&nbsp;string</h4>
<p>In case files can not be provided as URLs, files can be provided using base64 encoding. Base64 encoding can be achieved in many programming languages, and in the Google Colab an example is provided in&nbsp;Python.</p>
<p>When using base64 encoding, the <span class="caps">JSON</span> object for a file needs to fullfill the following&nbsp;requirements:</p>
<ul>
<li><code>type</code> needs to be set to <code>base64</code></li>
<li><code>value</code> needs to be the base64 encoded string of the&nbsp;file.</li>
<li><code>name</code> the filename that should be given this file. Needs to include the file extension. (e.g. <code>image_001.jpeg</code>)</li>
</ul>
<h3 id="uploading-multiple-files">Uploading multiple&nbsp;files</h3>
<p>Furthermore it is possible to upload more than one file at the time. For this one simply puts more than one <span class="caps">JSON</span> object into the <code>files</code> array:</p>
<pre><code class="lang-JSON">{
  <span class="attr">"name"</span>:<span class="string">"testCollection"</span>,
  <span class="attr">"files"</span>:[
    {
      <span class="attr">"type"</span>:<span class="string">"url"</span>,
      <span class="attr">"value"</span>:<span class="string">"http://www.e-codices.unifr.ch/loris/ubb/ubb-A-<span class="caps">II</span>-0004/ubb-A-II-0004_0002r.jp2/full/pct:25/0/default.jpg"</span>,
      <span class="attr">"name"</span>:<span class="string">"ubb-A-<span class="caps">II</span>-0004_0002r.jpg"</span>
    },
    {
      <span class="attr">"type"</span>:<span class="string">"url"</span>,
      <span class="attr">"value"</span>:<span class="string">"http://www.e-codices.unifr.ch/loris/ubb/ubb-A-<span class="caps">II</span>-0004/ubb-A-II-0004_0004r.jp2/full/pct:25/0/default.jpg"</span>,
      <span class="attr">"name"</span>:<span class="string">"ubb-A-<span class="caps">II</span>-0004_0004r.jpg"</span>
    }
  ]
}
</code></pre>
<p><strong>Note</strong>: If you want to create a collection with multiple files from base64 encoded images, be aware that the size of the request can not exceed <span class="caps">200MB</span>. If you want to add more files than this, create the collection with a single file first and then add more files to the existing collection as explained&nbsp;below.</p>
<h3 id="error-messages">Error&nbsp;Messages</h3>
<p>Creating a collection can produce the following error&nbsp;messages:</p>
<h4 id="collection-already-exists">Collection Already&nbsp;Exists</h4>
<p>If a collection with a given name already exists you will get the following&nbsp;response:</p>
<pre><code class="lang-json">{
  <span class="attr">"message"</span>: <span class="string">"A collection with the name: collection_name already exists."</span>,
  <span class="attr">"errorType"</span>: <span class="string">"DuplicateCollectionError"</span>
}
</code></pre>
<p>The <span class="caps">HTTP</span> <code>status-code</code> of this response is <code>500</code>.</p>
<h2 id="adding-files-to-a-collection">Adding files to a&nbsp;collection</h2>
<p>Files can be added to a collection using a <span class="caps">PUT</span> request to <code>/collections/:collectionName</code>.
The structure of the <code>request-body</code> is the same as above and files can be added either as <code>url</code> or <code>base64</code> encoded.</p>
<h2 id="remove-a-collection">Remove a&nbsp;collection</h2>
<p>A collection can be deleted with a <span class="caps">DELETE</span> request to <code>/collections/:collectionName</code>.</p>
</section>
      </div>
    </div>
    <hr class="clear">
    <div class="container footer">
      <div class="larger">
        <footer>
          <p><span>Made by </span><a href="https://diuf.unifr.ch/main/diva/" target="_blank">DIVA Group</a><span>.</span></p>
          <p>University of Fribourg (Switzerland)</p>
        </footer>
      </div>
    </div>
  </body>
</html>